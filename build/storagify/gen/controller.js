function base(t,e){if(Storage.prototype.__encoder=new Encoder(t.key),!e){Storage.prototype.__development=new Development,Storage.prototype.__production=new Production,Storage.prototype.__base={};for(let t of consts.defaults)Storage.prototype.__base[`_${t}`]=Storage.prototype[t]}Object.keys(t).map(e=>Storage.prototype[`__${e}`]=t[e]),Storage.prototype.env=function(){return this.__dev?this.__development:this.__production}}const consts={devkey:"__storagify__",defaults:["getItem","setItem","removeItem","clear"]},foo={list:function(){return config(this,`Listing all keys in ${type(this)}..`,()=>this.env().list(this))},when:function(t){return config(this,`Returning creation date of ${t} in ${type(this)}..`,()=>this.env().when(t,this))},getItem:function(t){return config(this,`Returning value of ${t} in ${type(this)}..`,()=>this.env().get(t,this))},setItem:function(t,e){return config(this,`Setting value of ${t} in ${type(this)}..`,()=>this.env().set(t,e,this))},removeItem:function(t){return config(this,`Removing ${t} from ${type(this)}..`,()=>this.env().delete(t,this))},clear:function(){return config(this,`Cleaning ${type(this)}..`,()=>this.env().clear(this))},start:function(){return config(this,`Initializing ${type(this)}..`,()=>this.env().start(this))}};function proto(t,e){if(!e)for(let t of Object.keys(foo))Storage.prototype[t]=foo[t];e||String.prototype.includes||(String.prototype.includes=function(t,e){"use strict";return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)})}const storage={base:(t,e)=>base(t,e),proto:(t,e)=>proto(t,e),start:()=>{localStorage.start(),sessionStorage.start()}},storagify={key:"",initialized:!1,init:function(t,e={dev:!1,debug:!1,stringify:!1}){if(!localStorage||!sessionStorage)throw new Error("Storage instance not found");if(!t||"string"!=typeof t)throw new Error("String key not found");e&&"object"==typeof e||(e={});const i={key:t,dev:e.dev,debug:e.debug,stringify:e.stringify};storage.base(i,this.initialized),storage.proto(i,this.initialized),storage.start(i,this.initialized),this.key&&this.key!==t&&console.warn("Initializing with a different key than previously used may cause problems and errors."),this.initialized=!0,this.key=t}};